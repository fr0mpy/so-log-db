# Internationalization (i18n)

**All user-facing text MUST use translation keys from `@stackone/i18n`.**

## Import Pattern

```tsx
// ❌ NEVER — hardcoded strings or separate imports
import { getTranslations } from 'next-intl/server'
import { dashboard } from '@stackone/i18n'
<h1>Dashboard</h1>

// ✅ ALWAYS — single import, typed keys
import { getTranslations, dashboard } from '@stackone/i18n'
const t = await getTranslations()
<h1>{t(dashboard.title)}</h1>
```

## Available Key Namespaces

```tsx
import {
  getTranslations,           // Translation function
  dashboard, logs, logDetail, search, explore,  // Page keys
  metadata, sidebar,         // Layout keys
  aria, logLevels, timeRanges, dataTypes, status,  // Common keys
  navigation, labels, brand  // Shared keys
} from '@stackone/i18n'
```

## Usage Rules

| Context | Pattern |
|---------|---------|
| Server Components | `const t = await getTranslations()` then `t(key)` |
| Client Components | `const t = useTranslations()` then `t(key)` |
| Metadata | `export async function generateMetadata() { const t = await getTranslations(); ... }` |
| Dynamic values | `t(logDetail.breadcrumbLog, { id })` |

## Key Structure

Keys are typed constants with autocomplete:

```tsx
dashboard.title           // → 'dashboard.title'
dashboard.stats.totalLogs // → 'dashboard.stats.totalLogs'
aria.search               // → 'aria.search'
```

## Adding New Keys

1. Add to JSON: `packages/i18n/messages/en/*.json` and `fr/*.json`
2. Add to keys: `packages/i18n/src/keys.ts`
3. Export from: `packages/i18n/src/index.ts`

## ARIA Labels with i18n

```tsx
// ❌ NEVER — hardcoded ARIA labels
<input aria-label="Search" />
<Select aria-label="Filter by level" />

// ✅ ALWAYS — translated ARIA labels
import { getTranslations, aria } from '@stackone/i18n'
const t = await getTranslations()
<input aria-label={t(aria.search)} />
<Select aria-label={t(aria.selectLanguage)} />
```

## Next.js Rendering + i18n

Cookie-based locale requires per-request rendering:

```tsx
// ❌ NEVER — breaks locale detection
export const dynamic = 'force-static'

// ✅ CORRECT — omit entirely, let Next.js determine
```

See `packages/i18n/LANGUAGES.md` for full documentation.
